<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="Henry Chronowski's portfolio website, for game programming, mathematics, animation, modelling, and graphics related work." />
    <title>Home - Henry Chronowski</title>
    <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,400,600,700,800,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/main.min.css">
    <link rel="stylesheet" href="assets/css/rtl.css">
</head>

<body>
    <div class="nav-main">
        <div class="container">
            <nav class="navbar navbar-expand-lg navbar-light">
                <a class="navbar-brand font-weight-bold" href="index.html">Henry Chronowski</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home</a>
                        </li>
                        <!--<li class="nav-item">
                            <a class="nav-link" href="project.html">Projects</a>
                        </li>
    -->
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="blogIndex.html">Blog</a>
                        </li>
                    </ul>

                    <ul class="navbar-nav ml-auto">


                        <li class="nav-item">
                            <a class="nav-link" href="contact.html">Contact</a>
                        </li>
                    </ul>
                </div>
            </nav>
            <!--end:Nav -->
        </div>
    </div>
    <!--end:Navigation -->
    <main role="main">
        <section class="pt-4">
            <div class="container">
                <div class="row">
                    <div class="col-md-7">
                        <div class="project-sidebar">
                            <!-- Place your project images here -->
                            <iframe width="560" height="315" src="https://www.youtube.com/embed/4RDuPNcEydc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            <p class="lead mt-4">
                                <br>
                            </p>
                        </div>
                    </div>
                    <!-- end:col -->
                    <div class="col-md-5 pl-lg-5 pl-md-5">
                        <!--<div class="sticky-top pt-5">-->
                        <h1>
                            Predicting Projectile Physics
                        </h1>
                    </div>
                    <p class="lead mt-4"><strong>The Problem</strong>
                        <br> I would like to find a generalized way to have an aritificial intelligence controlled agent in a game aim a projectile weapon at a player. This is an extremely common problem in games in the modern day, occuring in everything from 2D platformers to advanced simulation games like Bohemia Interactive's Arma series.
                                    These of course demand different degrees of accuracy and physics simulation but when you look at the core are described by the same generalized set of equations. We are going to look at this problem in several degrees of complication,
                                    starting with the simplest case of a projectile with no acceleration applied and a constant velocity. (Dean Note: I am planning on exploring different ballistics simulations over break)
                        <br><br> When you boil it down to its simplest form I am trying to anwser two seperate questions: How do you get a projectile to end up at a specific point at a specific time, and how do you predict the location of a moving object in a way that feels good to the player.
                                     You want the AI to feel like a challenging opponent to the player, but if their math is too good and they have precision accuracy then they can simply be an unfun opponent to play against.
                        <br>
                    </p>
                    <p class="lead mt-4"><strong>The Simplest Approach</strong>
                        <br> Sometimes you just don't need a fully ballistically simulated projectile, or the accurate calculations could be too intense for a specific game. For a projectile that still moves over time but doesn't require the most intense calculations
                                        (Think for example the bullets in the game SUPERHOT) you can often get away with assuming a zero acceleration, greatly simplifying simulation without affecting the player's enjoyment.
                        <br><br> First things first let's figure out how to get a projectile where we want it. What we have here is fundamentally a math problem, one that high school physics students accross the globe are intimately familiar with.
                                         Starting out, we know a couple things:
                        <br>• Location of our agent
                        <br>• Location of our target
                        <br>• Speed at which our projectile is launched
                        <br><br> From these we need to figure out one thing: The angle or direction at which to launch our projectile. Since we are assuming a zero acceleration in this case we are dealing with an extremely simple equation:
                    <figure><img src="./assets/img/BaseEquation.svg" alt="posPf &#61; posP0 &#43; (Speed&#215;Direction) Time" class="img-fluid"></figure>
                    </p>

                    <p class="lead mt-4">
                        <br><br> This doesn't seem like a hard equation, right? In reality, it isn't. You've got a known starting position and speed and you are simply trying to find the right direction to send it. However, there are two unknowns here:
                                         The direction, and all importantly, the time. How do we find the time? This is where the second part of this problem comes into play: predicting the position of the target.

                    </p>
                    <p class="lead mt-4"><strong>Target Prediction</strong>
                        <br><br> Starting to predict the position of the target we have two known factors:
                        <br>• Location of our target
                        <br>• Velocity of our target
                        <br><br> This results in a very familiar equation:
                    <figure><img src="./assets/img/TarEquation.svg" alt="posTf &#61; posT0 &#43; Velocity&#215;Time" class="img-fluid"></figure>
                    </p>

                    <p class="lead mt-4">
                        <br> We end up with the same equation, with even less unknowns, just time now. We can make several connections between the two equations: The final position of both the target and the projectile is the same, as is the time. With this in mind we can set the equations equal:
                        <!-- <br><br>pos<sub>T0</sub> &#43; Velocity&#215;Time &#61; pos<sub>Tf</sub> &#61; pos<sub>Pf</sub> &#61; pos<sub>P0</sub> &#43; (Speed&#215;Direction) Time
                                         <br>pos<sub>T0</sub> &#43; Velocity&#215;Time &#61; pos<sub>P0</sub> &#43; (Speed&#215;Direction) Time &#61; pos<sub>f</sub> -->
                    <figure><img src="./assets/img/EquationsEqual.svg" alt="posTf &#61; posT0 &#43; Velocity&#215;Time" class="img-fluid"></figure>
                    </p>

                    <p class="lead mt-4"><strong>Time Approximation</strong>
                        <br><br> You may notice that even though we have connected the equations as a system with common variables we still have an issue of having three unknowns; the final position, projectile direction, and the time.
                                         In order to solve for the projectile direction we need to figure out how long the projectile will be in the air as well as where it will collide with the target. In order to do this, we can use some logic to get an approximation of the time.
                        <br><br> One of our known constants is the speed of the projectile, and we also happen to know that it will be in the direction of the final position, whatever that ends up being. In addition we know the current velocity of the target, and if we find the vector from the AI to the target
                                         we can easily extrapolate the component of that velocity directed away from the AI using some vector math.
                        <br> In order to get the magnitude of the component of a vector A along a vector B we can use the equation (A • B) / |B| (You may have seen this before in the context of Proj<sub>V</sub>U). By applying this formula where A is the velocity of the target (V<sub>T</sub>) and B is the vector from the AI to the target (pos<sub>T0</sub> - pos<sub>P0</sub>)
                        we can get the scalar speed of the target linearly away from the AI.
                    <figure><img src="./assets/img/ProjEquation.svg" alt="" class="img-fluid"></figure>
                    </p>

                    <p class="lead mt-4">
                        <br><br> Now that we have a scalar speed along the vector from the AI to the target for both the projectile and the target due to the lack of acceleration we can look at this as a one-dimensional system, eliminating the unkown launch direction ("S" in subscript represent a scalar):
                        <!-- <br>pos<sub>T0</sub> &#43; Speed<sub>t</sub>&#215;Time &#61; pos<sub>P0</sub> &#43; Speed<sub>p</sub>&#215; Time &#61; pos<sub>f</sub> -->
                    <figure><img src="./assets/img/OneDEquation.svg" alt="" class="img-fluid"></figure>
                    </p>

                    <p class="lead mt-4">
                        <br> We can now solve for time: &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
                        <!-- Why is this the only way to make the following content actually go on a new line.-->
                    </p>
                    <figure><img src="./assets/img/Time1.svg" alt="posTf &#61; posT0 &#43; Velocity&#215;Time" class="img-fluid"></figure> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
                    <figure><img src="./assets/img/Time2.svg" alt="posTf &#61; posT0 &#43; Velocity&#215;Time" class="img-fluid"></figure>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
                    <figure><img src="./assets/img/Time3.svg" alt="posTf &#61; posT0 &#43; Velocity&#215;Time" class="img-fluid"></figure>

                    <p class="lead mt-4"><strong>Direction Calculation</strong>
                        <br><br> If we then substitute this into our original equation we are left with a single unknown, the vector direction of the projectile's launch:&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
                    <figure><img src="./assets/img/FinalEquation.svg" alt="posTf &#61; posT0 &#43; Velocity&#215;Time" class="img-fluid"></figure>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
                    </p>

                    <p class="lead mt-4">
                        <br>Let's step through solving it for the direction:                                &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
                        <!-- <br>pos<sub>T0</sub> &#8722; pos<sub>P0</sub> &#43; Velocity&#215;(pos<sub>T0</sub> &#8722; pos<sub>P0</sub>) &#247; (Speed<sub>p</sub> &#8722; Speed<sub>t</sub>) &#61; (Speed<sub>p</sub>&#215;Direction) (pos<sub>T0</sub> &#8722; pos<sub>P0</sub>) &#247; (Speed<sub>p</sub> &#8722; Speed<sub>t</sub>)
                                         <br>(pos<sub>T0</sub> &#8722; pos<sub>P0</sub>) (Speed<sub>p</sub> &#8722; Speed<sub>t</sub>)  &#247; (pos<sub>T0</sub> &#8722; pos<sub>P0</sub>) &#43; Velocity &#61; Speed<sub>p</sub>&#215;Direction
                                         <br>(Speed<sub>p</sub> &#8722; Speed<sub>t</sub>) &#43; Velocity &#61; Speed<sub>p</sub>&#215;Direction
                                         <br>((Speed<sub>p</sub> &#8722; Speed<sub>t</sub>) &#43; Velocity ) &#247; Speed<sub>p</sub> &#61; Direction -->
                    <figure><img src="./assets/img/Direction1.svg" alt="" class="img-fluid"></figure>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
                    <figure><img src="./assets/img/Direction2.svg" alt="" class="img-fluid"></figure>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
                    <figure><img src="./assets/img/Direction3.svg" alt="" class="img-fluid"></figure>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
                    <figure><img src="./assets/img/DirectionFinal.svg" alt="" class="img-fluid"></figure>
                    </p>
                    <p class="lead mt-4">
                        <br><br> Now that we have the direction, all we have to do is launch the projectile in that direction with the predetermined speed and we're set.

                    </p>


                    <p class="lead mt-4"><strong>Accuracy</strong>
                        <br> Now obviously this is neither the most accurate formula for aiming a projectile nor the most realistic. We are using an approximation of how long the projectile will take to reach the predicted position of the target to create our prediction, which invokes a
                                            good deal of uncertainty and estimation. However just because this formula isn't exactly accurate doesn't mean that it's not suitable; this innaccuracy is actually desireable as no one likes playing against an AI opponent with pinpoint accuracy and if we're trying to simulate
                                            a human NPC it just wouldn't be realistic. In fact, if you look into more ballistically accurate projectile simulations (such as those that I am hoping to explore below in the future) it is not uncommon for a manual deviance or innaccuracy to be introduced in order to account for this.
                                            By virtue of our equation's innaccuracy we don't have to worry about this.

                    </p>
                    <p class="lead mt-4"><strong>Applicability</strong>
                        <br> This is overall a very simple approximation of ballistics which can be used in a large variety of genres and games. Since this approach does not take into account gravity it is unlikely to be used when more realistic ballistic calculations are expected, or over long distances. As such you wouldn't want to use it in any kind of simulation game where people are looking for realism.
                        <br> Where this technique shines is where you just need a moving projectile that is generally aimed, something like a platformer where ballistics may not be as important or something like SUPERHOT where you need the projectiles to not be raycasted but they don't need to be realistic in their ballistics.
                                                If you're just looking for a projectile to take a bit of time to get from point A to point B with some measure of accuracy this is a good technique to employ.
                        <br>
                    </p>
                    <p class="lead mt-4"><strong>Platform Constraints</strong>
                        <br> Due to its simplicity there are not many platform constraints with this technique. You probably would not want to use it in excess where your memory or compute load are very limited, such as on a lower performance mobile device, as any
                                                    amount of ballistics calculations could be too much. However, on the overwhelming majority of semi-modern console and PC platforms this will not be an issue, and you may even be able to use it with a very large number of AI agents, although
                                                    other optimization for collision calculations would be necessary. The main source of worry in this equation is the need to get the length of the vector in order to use the approximation for time, but since this is just a one-off calculation and not code that will
                                                    likely be running every tick of a game I don't believe that this has a massive performance hit causing platform restrictions.
                    </p>
                    <p class="lead mt-4"><strong>Repository for Tech Demo</strong>
                        <br> Linked is a tech demo demonstrating this technique built in Animal 3D, a graphics engine by Dan Buckstein:
                        <br><a href="https://github.com/henrychronowski/brezova">Demo located in branch "final_project"</a>
                    </p>
                    <hr class="mt-5">
                    <div class="row mt-5"><strong>References</strong>
                        <div class="row mt-5">
                            <br>
                            <p>• AI for Games, Third Edition, Millington, CRC Press, 2019, Section 3.5
                                <br>• https://www.gamedeveloper.com/programming/predictive-aim-mathematics-for-ai-targeting
                                <br>• https://www.forrestthewoods.com/blog/solving_ballistic_trajectories/#.rrij13p29

                            </p>
                        </div>
                    </div>
                    <!-- end:col -->
                </div>
            </div>
            </div>
            <!-- end:row -->
            <hr class="mt-5">
            </div>
        </section>
    </main>
    <footer class="position-relative">
        <div class="container">
            <div class="row">

                <div class="col-lg-auto mt-4">
                    <p class="mb-4">henrychronowski.com</p>
                </div>
                <div class="col-lg-3 mt-4 ml-auto">
                    <p>Henry Chronowski
                        <br> Burlington, Vermont
                        <br> 05401
                    </p>
                    <a href="mailto:hrchronowski@gmail.com"><span style="text-decoration: underline;">hrchronowski@gmail.com</span></a>
                </div>
                <!--<div class="col-lg-3 mt-4 ml-auto">
                    <ul class="list-unstyled footer-link">
                        <li><a href="#">instagram</a></li>
                        <li><a href="#">facebook</a></li>
                        <li><a href="#" >twitter</a></li>
                    </ul>
                </div>
    			-->
                <div class="col-lg-auto ml-lg-auto mt-4">
                    <ul class="list-unstyled footer-link">
                        <li><a href="mailto: hrchronowski@gmail.com">My email</a></li>
                        <li><a href="https://www.linkedin.com/in/henry-chronowski/">Linkedin</a></li>
                        <li><a href="https://github.com/henrychronowski">Github</a></li>
                        <!-- Please note.You are not allowed to remove credit link.Please respect that.-->
                        <li><a href="https://sharebootstrap.com">dev by sharebootstrap</a></li>
                    </ul>
                </div>
            </div>
            <!--/.row-->
        </div>
        <!--/.container-->
    </footer>
    <script src="assets/js/main.min.js"></script>
</body>

</html>